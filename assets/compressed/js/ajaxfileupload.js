jQuery.extend({createUploadIframe:function(D,B){var A="jUploadFrame"+D;var C='<iframe id="'+A+'" name="'+A+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject){if(typeof B=="boolean"){C+=' src="javascript:false"'}else{if(typeof B=="string"){C+=' src="'+B+'"'}}}C+=" />";jQuery(C).appendTo(document.body);return jQuery("#"+A).get(0)},createUploadForm:function(A,I,D){var H="jUploadForm"+A;var C="jUploadFile"+A;var B=jQuery('<form  action="" method="POST" name="'+H+'" id="'+H+'" enctype="multipart/form-data"></form>');if(D){for(var E in D){jQuery('<input type="hidden" name="'+E+'" value="'+D[E]+'" />').appendTo(B)}}var F=jQuery("#"+I);var G=jQuery(F).clone();jQuery(F).attr("id",C);jQuery(F).before(G);jQuery(F).appendTo(B);jQuery(B).css("position","absolute");jQuery(B).css("top","-1200px");jQuery(B).css("left","-1200px");jQuery(B).appendTo("body");return B},ajaxFileUpload:function(J){J=jQuery.extend({},jQuery.ajaxSettings,J);var A=new Date().getTime();var B=jQuery.createUploadForm(A,J.fileElementId,(typeof(J.data)=="undefined"?false:J.data));var H=jQuery.createUploadIframe(A,J.secureuri);var G="jUploadFrame"+A;var I="jUploadForm"+A;if(J.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var C=false;var E={};if(J.global){jQuery.event.trigger("ajaxSend",[E,J])}var D=function(K){var O=document.getElementById(G);try{if(O.contentWindow){E.responseText=O.contentWindow.document.body?O.contentWindow.document.body.innerHTML:null;E.responseXML=O.contentWindow.document.XMLDocument?O.contentWindow.document.XMLDocument:O.contentWindow.document}else{if(O.contentDocument){E.responseText=O.contentDocument.document.body?O.contentDocument.document.body.innerHTML:null;E.responseXML=O.contentDocument.document.XMLDocument?O.contentDocument.document.XMLDocument:O.contentDocument.document}}}catch(N){jQuery.handleError(J,E,null,N)}if(E||K=="timeout"){C=true;var L;try{L=K!="timeout"?"success":"error";if(L!="error"){var M=jQuery.uploadHttpData(E,J.dataType);if(J.success){J.success(M,L)}if(J.global){jQuery.event.trigger("ajaxSuccess",[E,J])}}else{jQuery.handleError(J,E,L)}}catch(N){L="error";jQuery.handleError(J,E,L,N)}if(J.global){jQuery.event.trigger("ajaxComplete",[E,J])}if(J.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(J.complete){J.complete(E,L)}jQuery(O).unbind();setTimeout(function(){try{jQuery(O).remove();jQuery(B).remove()}catch(P){jQuery.handleError(J,E,null,P)}},100);E=null}};if(J.timeout>0){setTimeout(function(){if(!C){D("timeout")}},J.timeout)}try{var B=jQuery("#"+I);jQuery(B).attr("action",J.url);jQuery(B).attr("method","POST");jQuery(B).attr("target",G);if(B.encoding){jQuery(B).attr("encoding","multipart/form-data")}else{jQuery(B).attr("enctype","multipart/form-data")}jQuery(B).submit()}catch(F){jQuery.handleError(J,E,null,F)}jQuery("#"+G).load(D);return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script"){jQuery.globalEval(data)}if(type=="json"){eval("data = "+data)}if(type=="html"){jQuery("<div>").html(data).evalScripts()}return data}});