(function(G){function B(){this.regional=[];this.regional[""]={labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:false,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1};G.extend(this._defaults,this.regional[""]);this._serverSyncs=[];function D(Q){var O=(Q<1000000000000?(O=performance.now?(performance.now()+performance.timing.navigationStart):Date.now()):Q||new Date().getTime());if(O-H>=1000){K._updateTargets();H=O}M(D)}var M=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var H=0;if(!M||G.noRequestAnimationFrame){G.noRequestAnimationFrame=null;setInterval(function(){K._updateTargets()},980)}else{H=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||new Date().getTime();M(D)}}var C=0;var I=1;var E=2;var A=3;var P=4;var J=5;var F=6;G.extend(B.prototype,{markerClassName:"hasCountdown",propertyName:"countdown",_rtlClass:"countdown_rtl",_sectionClass:"countdown_section",_amountClass:"countdown_amount",_rowClass:"countdown_row",_holdingClass:"countdown_holding",_showClass:"countdown_show",_descrClass:"countdown_descr",_timerTargets:[],setDefaults:function(D){this._resetExtraLabels(this._defaults,D);G.extend(this._defaults,D||{})},UTCDate:function(U,T,S,Q,O,M,H,D){if(typeof T=="object"&&T.constructor==Date){D=T.getMilliseconds();H=T.getSeconds();M=T.getMinutes();O=T.getHours();Q=T.getDate();S=T.getMonth();T=T.getFullYear()}var R=new Date();R.setUTCFullYear(T);R.setUTCDate(1);R.setUTCMonth(S||0);R.setUTCDate(Q||1);R.setUTCHours(O||0);R.setUTCMinutes((M||0)-(Math.abs(U)<30?U*60:U));R.setUTCSeconds(H||0);R.setUTCMilliseconds(D||0);return R},periodsToSeconds:function(D){return D[0]*31557600+D[1]*2629800+D[2]*604800+D[3]*86400+D[4]*3600+D[5]*60+D[6]},_attachPlugin:function(H,D){H=G(H);if(H.hasClass(this.markerClassName)){return}var M={options:G.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};H.addClass(this.markerClassName).data(this.propertyName,M);this._optionPlugin(H,D)},_addTarget:function(D){if(!this._hasTarget(D)){this._timerTargets.push(D)}},_hasTarget:function(D){return(G.inArray(D,this._timerTargets)>-1)},_removeTarget:function(D){this._timerTargets=G.map(this._timerTargets,function(H){return(H==D?null:H)})},_updateTargets:function(){for(var D=this._timerTargets.length-1;D>=0;D--){this._updateCountdown(this._timerTargets[D])}},_optionPlugin:function(H,D,R){H=G(H);var Q=H.data(this.propertyName);if(!D||(typeof D=="string"&&R==null)){var O=D;D=(Q||{}).options;return(D&&O?D[O]:D)}if(!H.hasClass(this.markerClassName)){return}D=D||{};if(typeof D=="string"){var O=D;D={};D[O]=R}this._resetExtraLabels(Q.options,D);G.extend(Q.options,D);this._adjustSettings(H,Q);var M=new Date();if((Q._since&&Q._since<M)||(Q._until&&Q._until>M)){this._addTarget(H[0])}this._updateCountdown(H,Q)},_updateCountdown:function(H,D){var R=G(H);D=D||R.data(this.propertyName);if(!D){return}R.html(this._generateHTML(D)).toggleClass(this._rtlClass,D.options.isRTL);if(G.isFunction(D.options.onTick)){var Q=D._hold!="lap"?D._periods:this._calculatePeriods(D,D._show,D.options.significant,new Date());if(D.options.tickInterval==1||this.periodsToSeconds(Q)%D.options.tickInterval==0){D.options.onTick.apply(H,[Q])}}var O=D._hold!="pause"&&(D._since?D._now.getTime()<D._since.getTime():D._now.getTime()>=D._until.getTime());if(O&&!D._expiring){D._expiring=true;if(this._hasTarget(H)||D.options.alwaysExpire){this._removeTarget(H);if(G.isFunction(D.options.onExpiry)){D.options.onExpiry.apply(H,[])}if(D.options.expiryText){var M=D.options.layout;D.options.layout=D.options.expiryText;this._updateCountdown(H,D);D.options.layout=M}if(D.options.expiryUrl){window.location=D.options.expiryUrl}}D._expiring=false}else{if(D._hold=="pause"){this._removeTarget(H)}}R.data(this.propertyName,D)},_resetExtraLabels:function(H,D){var O=false;for(var M in D){if(M!="whichLabels"&&M.match(/[Ll]abels/)){O=true;break}}if(O){for(var M in H){if(M.match(/[Ll]abels[02-9]/)){H[M]=null}}}},_adjustSettings:function(H,D){var T;var S=0;var R=null;for(var M=0;M<this._serverSyncs.length;M++){if(this._serverSyncs[M][0]==D.options.serverSync){R=this._serverSyncs[M][1];break}}if(R!=null){S=(D.options.serverSync?R:0);T=new Date()}else{var Q=(G.isFunction(D.options.serverSync)?D.options.serverSync.apply(H,[]):null);T=new Date();S=(Q?T.getTime()-Q.getTime():0);this._serverSyncs.push([D.options.serverSync,S])}var O=D.options.timezone;O=(O==null?-T.getTimezoneOffset():O);D._since=D.options.since;if(D._since!=null){D._since=this.UTCDate(O,this._determineTime(D._since,null));if(D._since&&S){D._since.setMilliseconds(D._since.getMilliseconds()+S)}}D._until=this.UTCDate(O,this._determineTime(D.options.until,T));if(S){D._until.setMilliseconds(D._until.getMilliseconds()+S)}D._show=this._determineShow(D)},_destroyPlugin:function(D){D=G(D);if(!D.hasClass(this.markerClassName)){return}this._removeTarget(D[0]);D.removeClass(this.markerClassName).empty().removeData(this.propertyName)},_pausePlugin:function(D){this._hold(D,"pause")},_lapPlugin:function(D){this._hold(D,"lap")},_resumePlugin:function(D){this._hold(D,null)},_hold:function(H,D){var O=G.data(H,this.propertyName);if(O){if(O._hold=="pause"&&!D){O._periods=O._savePeriods;var M=(O._since?"-":"+");O[O._since?"_since":"_until"]=this._determineTime(M+O._periods[0]+"y"+M+O._periods[1]+"o"+M+O._periods[2]+"w"+M+O._periods[3]+"d"+M+O._periods[4]+"h"+M+O._periods[5]+"m"+M+O._periods[6]+"s");this._addTarget(H)}O._hold=D;O._savePeriods=(D=="pause"?O._periods:null);G.data(H,this.propertyName,O);this._updateCountdown(H,O)}},_getTimesPlugin:function(H){var D=G.data(H,this.propertyName);return(!D?null:(!D._hold?D._periods:this._calculatePeriods(D,D._show,D.options.significant,new Date())))},_determineTime:function(M,H){var D=function(S){var R=new Date();R.setTime(R.getTime()+S*1000);return R};var Q=function(k){k=k.toLowerCase();var Z=new Date();var Y=Z.getFullYear();var X=Z.getMonth();var W=Z.getDate();var V=Z.getHours();var U=Z.getMinutes();var T=Z.getSeconds();var S=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var R=S.exec(k);while(R){switch(R[2]||"s"){case"s":T+=parseInt(R[1],10);break;case"m":U+=parseInt(R[1],10);break;case"h":V+=parseInt(R[1],10);break;case"d":W+=parseInt(R[1],10);break;case"w":W+=parseInt(R[1],10)*7;break;case"o":X+=parseInt(R[1],10);W=Math.min(W,K._getDaysInMonth(Y,X));break;case"y":Y+=parseInt(R[1],10);W=Math.min(W,K._getDaysInMonth(Y,X));break}R=S.exec(k)}return new Date(Y,X,W,V,U,T,0)};var O=(M==null?H:(typeof M=="string"?Q(M):(typeof M=="number"?D(M):M)));if(O){O.setMilliseconds(0)}return O},_getDaysInMonth:function(H,D){return 32-new Date(H,D,32).getDate()},_normalLabels:function(D){return D},_generateHTML:function(X){var W=this;X._periods=(X._hold?X._periods:this._calculatePeriods(X,X._show,X.options.significant,new Date()));var V=false;var U=0;var T=X.options.significant;var S=G.extend({},X._show);for(var R=C;R<=F;R++){V|=(X._show[R]=="?"&&X._periods[R]>0);S[R]=(X._show[R]=="?"&&!V?null:X._show[R]);U+=(S[R]?1:0);T-=(X._periods[R]>0?1:0)}var Q=[false,false,false,false,false,false,false];for(var R=F;R>=C;R--){if(X._show[R]){if(X._periods[R]){Q[R]=true}else{Q[R]=T>0;T--}}}var O=(X.options.compact?X.options.compactLabels:X.options.labels);var M=X.options.whichLabels||this._normalLabels;var H=function(Z){var Y=X.options["compactLabels"+M(X._periods[Z])];return(S[Z]?W._translateDigits(X,X._periods[Z])+(Y?Y[Z]:O[Z])+" ":"")};var D=function(Z){var Y=X.options["labels"+M(X._periods[Z])];return((!X.options.significant&&S[Z])||(X.options.significant&&Q[Z])?'<span class="'+K._sectionClass+'"><span class="'+K._amountClass+'">'+W._translateDigits(X,X._periods[Z])+"</span><br/>"+(Y?Y[Z]:O[Z])+"</span>":"")};return(X.options.layout?this._buildLayout(X,S,X.options.layout,X.options.compact,X.options.significant,Q):((X.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(X._hold?" "+this._holdingClass:"")+'">'+H(C)+H(I)+H(E)+H(A)+(S[P]?this._minDigits(X,X._periods[P],2):"")+(S[J]?(S[P]?X.options.timeSeparator:"")+this._minDigits(X,X._periods[J],2):"")+(S[F]?(S[P]||S[J]?X.options.timeSeparator:"")+this._minDigits(X,X._periods[F],2):""):'<span class="'+this._rowClass+" "+this._showClass+(X.options.significant||U)+(X._hold?" "+this._holdingClass:"")+'">'+D(C)+D(I)+D(E)+D(A)+D(P)+D(J)+D(F))+"</span>"+(X.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+X.options.description+"</span>":"")))},_buildLayout:function(a,Z,Y,X,W,V){var T=a.options[X?"compactLabels":"labels"];var S=a.options.whichLabels||this._normalLabels;var R=function(b){return(a.options[(X?"compactLabels":"labels")+S(a._periods[b])]||T)[b]};var Q=function(d,c){return a.options.digits[Math.floor(d/c)%10]};var O={desc:a.options.description,sep:a.options.timeSeparator,yl:R(C),yn:this._minDigits(a,a._periods[C],1),ynn:this._minDigits(a,a._periods[C],2),ynnn:this._minDigits(a,a._periods[C],3),y1:Q(a._periods[C],1),y10:Q(a._periods[C],10),y100:Q(a._periods[C],100),y1000:Q(a._periods[C],1000),ol:R(I),on:this._minDigits(a,a._periods[I],1),onn:this._minDigits(a,a._periods[I],2),onnn:this._minDigits(a,a._periods[I],3),o1:Q(a._periods[I],1),o10:Q(a._periods[I],10),o100:Q(a._periods[I],100),o1000:Q(a._periods[I],1000),wl:R(E),wn:this._minDigits(a,a._periods[E],1),wnn:this._minDigits(a,a._periods[E],2),wnnn:this._minDigits(a,a._periods[E],3),w1:Q(a._periods[E],1),w10:Q(a._periods[E],10),w100:Q(a._periods[E],100),w1000:Q(a._periods[E],1000),dl:R(A),dn:this._minDigits(a,a._periods[A],1),dnn:this._minDigits(a,a._periods[A],2),dnnn:this._minDigits(a,a._periods[A],3),d1:Q(a._periods[A],1),d10:Q(a._periods[A],10),d100:Q(a._periods[A],100),d1000:Q(a._periods[A],1000),hl:R(P),hn:this._minDigits(a,a._periods[P],1),hnn:this._minDigits(a,a._periods[P],2),hnnn:this._minDigits(a,a._periods[P],3),h1:Q(a._periods[P],1),h10:Q(a._periods[P],10),h100:Q(a._periods[P],100),h1000:Q(a._periods[P],1000),ml:R(J),mn:this._minDigits(a,a._periods[J],1),mnn:this._minDigits(a,a._periods[J],2),mnnn:this._minDigits(a,a._periods[J],3),m1:Q(a._periods[J],1),m10:Q(a._periods[J],10),m100:Q(a._periods[J],100),m1000:Q(a._periods[J],1000),sl:R(F),sn:this._minDigits(a,a._periods[F],1),snn:this._minDigits(a,a._periods[F],2),snnn:this._minDigits(a,a._periods[F],3),s1:Q(a._periods[F],1),s10:Q(a._periods[F],10),s100:Q(a._periods[F],100),s1000:Q(a._periods[F],1000)};var M=Y;for(var U=C;U<=F;U++){var H="yowdhms".charAt(U);var D=new RegExp("\\{"+H+"<\\}(.*)\\{"+H+">\\}","g");M=M.replace(D,((!W&&Z[U])||(W&&V[U])?"$1":""))}G.each(O,function(d,c){var b=new RegExp("\\{"+d+"\\}","g");M=M.replace(b,c)});return M},_minDigits:function(H,D,M){D=""+D;if(D.length>=M){return this._translateDigits(H,D)}D="0000000000"+D;return this._translateDigits(H,D.substr(D.length-M))},_translateDigits:function(D,H){return(""+H).replace(/[0-9]/g,function(M){return D.options.digits[M]})},_determineShow:function(H){var D=H.options.format;var M=[];M[C]=(D.match("y")?"?":(D.match("Y")?"!":null));M[I]=(D.match("o")?"?":(D.match("O")?"!":null));M[E]=(D.match("w")?"?":(D.match("W")?"!":null));M[A]=(D.match("d")?"?":(D.match("D")?"!":null));M[P]=(D.match("h")?"?":(D.match("H")?"!":null));M[J]=(D.match("m")?"?":(D.match("M")?"!":null));M[F]=(D.match("s")?"?":(D.match("S")?"!":null));return M},_calculatePeriods:function(x,w,v,b){x._now=b;x._now.setMilliseconds(0);var a=new Date(x._now.getTime());if(x._since){if(b.getTime()<x._since.getTime()){x._now=b=a}else{b=x._since}}else{a.setTime(x._until.getTime());if(b.getTime()>x._until.getTime()){x._now=b=a}}var Z=[0,0,0,0,0,0,0];if(w[C]||w[I]){var Y=K._getDaysInMonth(b.getFullYear(),b.getMonth());var X=K._getDaysInMonth(a.getFullYear(),a.getMonth());var W=(a.getDate()==b.getDate()||(a.getDate()>=Math.min(Y,X)&&b.getDate()>=Math.min(Y,X)));var V=function(c){return(c.getHours()*60+c.getMinutes())*60+c.getSeconds()};var U=Math.max(0,(a.getFullYear()-b.getFullYear())*12+a.getMonth()-b.getMonth()+((a.getDate()<b.getDate()&&!W)||(W&&V(a)<V(b))?-1:0));Z[C]=(w[C]?Math.floor(U/12):0);Z[I]=(w[I]?U-Z[C]*12:0);b=new Date(b.getTime());var T=(b.getDate()==Y);var S=K._getDaysInMonth(b.getFullYear()+Z[C],b.getMonth()+Z[I]);if(b.getDate()>S){b.setDate(S)}b.setFullYear(b.getFullYear()+Z[C]);b.setMonth(b.getMonth()+Z[I]);if(T){b.setDate(S)}}var R=Math.floor((a.getTime()-b.getTime())/1000);var Q=function(d,c){Z[d]=(w[d]?Math.floor(R/c):0);R-=Z[d]*c};Q(E,604800);Q(A,86400);Q(P,3600);Q(J,60);Q(F,1);if(R>0&&!x._since){var O=[1,12,4.3482,7,24,60,60];var M=F;var H=1;for(var D=F;D>=C;D--){if(w[D]){if(Z[M]>=H){Z[M]=0;R=1}if(R>0){Z[D]++;R=0;M=D;H=1}}H*=O[D]}}if(v){for(var D=C;D<=F;D++){if(v&&Z[D]){v--}else{if(!v){Z[D]=0}}}}return Z}});var L=["getTimes"];function N(H,D){if(H=="option"&&(D.length==0||(D.length==1&&typeof D[0]=="string"))){return true}return G.inArray(H,L)>-1}G.fn.countdown=function(H){var D=Array.prototype.slice.call(arguments,1);if(N(H,D)){return K["_"+H+"Plugin"].apply(K,[this[0]].concat(D))}return this.each(function(){if(typeof H=="string"){if(!K["_"+H+"Plugin"]){throw"Unknown command: "+H}K["_"+H+"Plugin"].apply(K,[this].concat(D))}else{K._attachPlugin(this,H||{})}})};var K=G.countdown=new B()})(jQuery);